!function(){"use strict";const e={title:"Game of Life",fields:[{field:"input",id:"rowField",class:"input",type:"number",name:"rowField",label:"Rows",value:5,min:3,max:30,step:1},{field:"input",id:"colField",class:"input",type:"number",name:"colField",label:"Cols",value:5,min:3,max:30,step:1},{field:"input",id:"range",class:"range",type:"range",name:"tickmarks",label:"Speed",value:1,min:1,max:5,step:1}],button:[{field:"button",id:"buttonStart",class:"button",text:"Start",disabled:!0},{field:"button",id:"buttonStop",class:"button",text:"Stop",disabled:!0},{field:"button",id:"buttonClear",class:"button",text:"Clear",disabled:!0}],classTable:"table",classForm:"form",classCell:"cell",classCellActive:"cell_alive",interval:1e3,message:"message"};function t(e){localStorage.setItem("arrayAlive",JSON.stringify(e))}function r(){return JSON.parse(localStorage.getItem("arrayAlive"))}function n(e,t){for(var r=[],n=0;n<e;n+=1){r[n]=[];for(var l=0;l<t;l+=1)r[n][l]=0}return r}function l(t,n){var l,a,i,s,c=r(),o=0;l=t-1<0?0:t-1,a=t+1>=e.fields[0].value?e.fields[0].value-1:t+1,i=n-1<0?0:n-1,s=n+1>=e.fields[1].value?e.fields[1].value-1:n+1;for(var u=l;u<=a;u+=1)for(var d=i;d<=s;d+=1)u===t&&d===n||(o+=Number(c[u][d]));return o}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function s(t,r){var n,l=r;l.innerHTML="";for(var s="".concat(e.classCell," ").concat(e.classCellActive).split(" "),c=0;c<t.length;c+=1){var o=document.createElement("tr");l.appendChild(o).setAttribute("class","row");for(var u=0;u<t[c].length;u+=1){var d,f=document.createElement("td");o.appendChild(f).setAttribute("class","cell"),f.dataset.row="".concat(c),f.dataset.col="".concat(u),1===t[c][u]&&(d=f.classList).add.apply(d,function(e){if(Array.isArray(e))return a(e)}(n=s)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||i(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}}function c(t){return t.querySelectorAll(".".concat(e.classCellActive)).length}function o(e,t){t.disabled=e<=0}function u(e,n,l,a){var i=r();if(a)if(e>l)i.splice(-1);else{i.push([]);for(var s=0;s<n;s+=1)i[l-1].push(0)}else for(var c=0;c<e;c+=1)n>l?i[c].splice(-1):i[c].push(0);return t(i),i}var d,f=1e3*e.fields[2].value,m=[];function v(a,i,s,u,b,p,A){var y,g=r(),h=1e3*Number(u.value);y=h!==f?h:f,m=function(e,t){for(var a=n(e,t),i=0;i<e;i+=1)for(var s=0;s<t;s+=1)a[i][s]=l(i,s);return function(e,t,l){for(var a=r(),i=n(t,l),s=0;s<t;s+=1)for(var c=0;c<l;c+=1)1===a[s][c]?e[s][c]<2||e[s][c]>3?i[s][c]=0:i[s][c]=1:3===e[s][c]&&(i[s][c]=1);return i}(a,e,t)}(i,s),function(t,n){for(var l=r(),a=0;a<t;a+=1)for(var i=0;i<n;i+=1){var s=document.querySelectorAll("td[data-row='".concat(a,"'][data-col='").concat(i,"']"));s[0].classList.remove(e.classCellActive),1===l[a][i]&&s[0].classList.add(e.classCellActive)}}(i,s),t(m);var E,C,S=(C=m,(E=g).every((function(e,t){return E[t].every((function(e,r){return e===C[t][r]}))})));c(a)<=0?(clearTimeout(d),n(i,s),o(0,b)):S?(clearTimeout(d),n(i,s),o(0,b),o(1,p),o(1,A)):d=setTimeout(v,y,a,i,s,u,b,p,A)}function b(t,r,n,l){var a,c,o=t.target.getAttribute("id"),d=function(e){var t=e.querySelectorAll("tr").length,r=e.querySelectorAll("tr")[0].querySelectorAll("td").length;return[Number(t),Number(r)]}(r),f=(c=2,function(e){if(Array.isArray(e))return e}(a=d)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,l,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,l=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw l}}return a}}(a,c)||i(a,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=f[0],b=f[1];if(o===e.fields[0].id){var p=Number(n.value);s(m=u(v,b,p,!0),r)}else if(o===e.fields[1].id){var A=Number(l.value);s(m=u(v,b,A,!1),r)}}function p(){var l=e.fields[0].value,a=e.fields[1].value;t(n(l,a));var i=document.getElementById("".concat(e.classTable)),s=document.getElementById("".concat(e.classForm)),u=document.getElementById("".concat(e.fields[0].id)),m=document.getElementById("".concat(e.fields[1].id)),p=document.getElementById("".concat(e.button[0].id)),A=document.getElementById("".concat(e.button[1].id)),y=document.getElementById("".concat(e.button[2].id)),g=document.getElementById("".concat(e.fields[2].id));i.addEventListener("click",(function(n){return function(n,l,a,i){var s=function(e){var t=e.target;return[t.dataset.row,t.dataset.col]}(n);!function(t){var r=Number(t[0]),n=Number(t[1]);document.querySelectorAll("td[data-row='".concat(r,"'][data-col='").concat(n,"']"))[0].classList.toggle(e.classCellActive)}(s);var u,d,f,m,v,b=c(l);o(b,i),o(b,a),t((u=s,d=r(),f=Number(u[0]),m=Number(u[1]),v=d.slice(),d[f][m]?v[f][m]=0:v[f][m]=1,v))}(n,i,p,y)})),p.addEventListener("click",(function(){return function(e,t,r,n,l,a,i){o(c(e),r),o(0,l),o(0,n),setTimeout(v,f,e,a,i,t,r,n,l)}(i,g,A,p,y,l,a)})),A.addEventListener("click",(function(){return function(e,t,r,n){var l=c(e);clearTimeout(d),o(0,t),o(l,n),o(l,r)}(i,A,p,y)})),y.addEventListener("click",(function(){return function(r,l,a,i,s){!function(t){for(var r=t.querySelectorAll(".".concat(e.classCellActive)),n=0;n<r.length;n+=1)r[n].classList.remove(e.classCellActive)}(r);var u=c(r);o(u,a),o(u,l),t(n(i,s))}(i,p,y,l,a)})),s.addEventListener("change",(function(e){return b(e,i,u,m)}))}document.addEventListener("DOMContentLoaded",(function(){(function(t,r){var l=document.createElement("div");t.appendChild(l).setAttribute("class","wrapper");var a=document.querySelector(".wrapper"),i=document.createElement("header");a.appendChild(i).setAttribute("class","header");var c=document.createElement("h1");i.appendChild(c).setAttribute("class","title"),c.innerHTML=r.title;var o=document.createElement("main");a.appendChild(o).setAttribute("class","main");var u=document.createElement("footer");t.appendChild(u).setAttribute("class","footer");var d=document.createElement("div");o.appendChild(d).setAttribute("class","form"),d.setAttribute("id","form");for(var f,m,v=r.fields.length,b=0;b<v;b+=1){var p=document.createElement("div");d.appendChild(p).setAttribute("class","form-item");var A=document.createElement(r.fields[b].field);p.appendChild(A).setAttribute("id",r.fields[b].id),A.setAttribute("class",r.fields[b].class),A.setAttribute("type",r.fields[b].type);var y=document.createElement("label");p.appendChild(y).setAttribute("for",r.fields[b].id),y.setAttribute("class","label"),y.innerHTML=r.fields[b].label;var g=r.fields[b],h=g.min,E=g.max,C=g.step;if(p.appendChild(A).setAttribute("name",r.fields[b].name),A.setAttribute("value",String(r.fields[b].value)),A.setAttribute("min",String(h)),A.setAttribute("max",String(E)),A.setAttribute("step",String(C)),"range"===r.fields[b].type){p.appendChild(A).setAttribute("list",r.fields[b].name);var S=document.createElement("datalist");p.appendChild(S).setAttribute("id",r.fields[b].name);for(var L=h;L<=E;L+=C){var T=document.createElement("option");S.appendChild(T).setAttribute("value",String(L)),T.setAttribute("label",String(L)),T.innerHTML=String(L)}}}if(r.fields[0].value>2||r.fields[1].value>2){var w=document.createElement(r.classTable);o.appendChild(w).setAttribute("class",r.classTable),w.setAttribute("id",r.classTable),w.setAttribute("border","0"),w.setAttribute("cellpadding","0"),w.setAttribute("cellspacing","0"),s(n(r.fields[0].value,r.fields[1].value),w)}else f=document.getElementsByTagName("body")[0],m=document.createElement("div"),f.appendChild(m).setAttribute("class",e.message),m.setAttribute("id",e.message),m.innerHTML="Error: small input values";var I=document.createElement("div");o.appendChild(I).setAttribute("class","control"),I.setAttribute("id","control");for(var N=0;N<v;N+=1){var x=document.createElement(r.button[N].field);I.appendChild(x).setAttribute("type",r.button[N].field),x.setAttribute("id",r.button[N].id),x.setAttribute("class",r.button[N].class),r.button[N].disabled&&x.setAttribute("disabled","disabled"),x.innerHTML=r.button[N].text}})(document.getElementById("app"),e),p()}))}();